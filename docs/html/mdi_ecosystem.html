<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TFBQ45D');</script>
<!-- End Google Tag Manager -->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Molssi Driver Interface Library: MDI Ecosystem</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
 <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TFBQ45D"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
  <td id="projectlogo"><img alt="Logo" src="mdi_main_logo_text_300x204.png"/></td>
  <td id="projectalign" style="padding-left: 6.0em;">
   <div id="projectname">Molssi Driver Interface Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MDI Ecosystem </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="ecosystem_overview"></a>
Overview</h1>
<p>This section provides basic usage instructions for the drivers, engines, and other codes that compose the MDI ecosystem.</p>
<h1><a class="anchor" id="ecosystem_lammps"></a>
LAMMPS</h1>
<p>To use LAMMPS as an engine, follow these steps:</p>
<ol type="1">
<li>Acquire and compile LAMMPS, following the <a href="https://lammps.sandia.gov/doc/Build.html">LAMMPS build guide</a>. You will need to <a href="https://docs.lammps.org/Build_extras.html">enable the USER-MDI package</a> when building LAMMPS.</li>
<li>Prepare a LAMMPS input file that specifies the initial molecular geometry of the system, the force field to be used, and any other desired settings. At the end of the input file, call the <b>mdi/engine</b> command, which does not accept any arguments. For example: <pre class="fragment">units           real
neigh_modify    delay 0 every 1 check yes
atom_style      full
bond_style      harmonic
angle_style     harmonic
pair_style      lj/cut/coul/long 10.0
pair_modify     mix arithmetic
kspace_style    pppm 1e-4
special_bonds   amber

atom_modify     sort 0 0

read_data       lammps.data

timestep        1.0

dump            1 all custom 1 dump.lammpstrj id element xu yu zu
dump            2 all custom 1 dump.force id element fx fy fz
dump            3 all xyz 1 dump.xyz
dump_modify     1 element O H
dump_modify     2 element O H

thermo_style    multi
thermo          1

fix             1 all nvt temp 300.0 300.0 70.0
fix             2 all shake 0.0001 20 0 b 1 a 1

mdi/engine
</pre></li>
<li>Launch LAMMPS using the "<code>-mdi"</code> runtime option, which is described in <a class="el" href="library_page.html#library_launching_sec">Launching Codes with the MDI Library</a>. For example: <pre class="fragment">lammps -in lammps.in -mdi "-role ENGINE -name my_name -method TCP -port 8021 -hostname localhost" &amp;
</pre></li>
</ol>
<h1><a class="anchor" id="ecosystem_openmm"></a>
OpenMM</h1>
<p><a href="https://github.com/taylor-a-barnes/MDI_OpenMM_Plugin">An MDI plugin</a> for <a href="http://openmm.org/">OpenMM</a> is available that enables OpenMM to be run as an MDI engine. To use OpenMM as an engine, follow these steps:</p>
<ol type="1">
<li>Install OpenMM</li>
<li>Install the OpenMM MDI plugin</li>
<li>Prepare OpenMM input files that specify the initial molecular geometry of the system and any other desired settings.</li>
<li>In the OpenMM run script, replace the normal call to <code>Simulation</code> with a call to <code>MDISimulation</code>, which requires a new argument that corresponds to the MDI runtime options. For example: <pre class="fragment">simulation = MDISimulation("-name MM -role ENGINE -method TCP -port 8021 -hostname localhost", pdb.topology, system, integrator, platform)
</pre></li>
<li>At the end of the run script (or at whatever point OpenMM should begin accepting commands from the driver) call the <code>runMDI()</code> function on the <code>MDISimulation</code> object you created in the last step: <pre class="fragment">simulation.runMDI()
</pre></li>
</ol>
<h1><a class="anchor" id="ecosystem_psi4"></a>
Psi4</h1>
<p>To use Psi4 as an engine, follow these steps:</p>
<ol type="1">
<li>Install MDI as a Python package, using either Conda (<code>conda install -c conda-forge pymdi</code>) or pip (<code>pip install pymdi</code>).</li>
<li>Acquire and compile Psi4, following the <a href="http://www.psicode.org/psi4manual/master/external.html">Psi4 installation guide</a>. Installing via Conda is recommended.</li>
<li>Prepare a Psi4 input file that specifies the initial molecular geometry of the system and any other desired settings. At the end of the input file, call the <b>energy</b> command with the <code>mdi=True</code> optional argument. For example: <pre class="fragment">molecule {
O 4.92718 4.99809 1.10308
H 5.80905 5.31488 0.90767
H 4.87602 4.14701 0.667997
}

energy("scf/sto-3g", mdi=True)
</pre></li>
<li>Launch Psi4 using the "<code>--mdi"</code> runtime option, which is described in <a class="el" href="library_page.html#library_launching_sec">Launching Codes with the MDI Library</a>. For example: <pre class="fragment">psi4 -i psi4.dat --mdi "-role ENGINE -name my_name -method TCP -port 8021 -hostname localhost" &amp;
</pre></li>
</ol>
<h1><a class="anchor" id="ecosystem_qcengine"></a>
QCEngine</h1>
<p>To use QCEngine as an MDI engine, follow these steps:</p>
<ol type="1">
<li>Install QCEngine, following the <a href="https://qcengine.readthedocs.io/en/latest/install.html">QCEngine installation guide</a>.</li>
<li>Prepare a QCEngine input file that specifies the initial molecular geometry of the system and any other desired settings. At the end of the input file, create an "<code>MDIServer"</code> object and call the "<code>start()"</code> method on it. For example: <pre class="fragment">import qcengine as qcng
import qcelemental as qcel

mol = qcel.models.Molecule.from_data("""
O  0.0  0.000  -0.129
H  0.0 -1.494  1.027
H  0.0  1.494  1.027
""")

o = qcng.MDIServer(mdi_options = "-role ENGINE -name QM -method TCP -port 8021 -hostname localhost",
                   program = "psi4",
                   molecule = mol,
                   model = {"method": "SCF", "basis": "sto-3g"},
                   keywords = {"scf_type": "df"})
o.start()
</pre></li>
<li>Run the input script as normal. Note that there is NOT a "<code>--mdi"</code> runtime option.</li>
</ol>
<h1><a class="anchor" id="ecosystem_qe"></a>
Quantum ESPRESSO</h1>
<p>MolSSI provides <a href="https://github.com/MolSSI/q-e/tree/mdi">an MDI-enabled fork</a> of <a href="https://www.quantum-espresso.org/">Quantum ESPRESSO</a> (QE) that can be run as an MDI engine. To use QE as an engine, follow these steps:</p>
<ol type="1">
<li>Acquire the MDI-enabled fork of QE: <pre class="fragment">git clone --branch mdi git@github.com:MolSSI/q-e.git
</pre></li>
<li>Compile pw.x, following the <a href="https://www.quantum-espresso.org/Doc/user_guide/node10.html">QE build guide</a>.</li>
<li>Prepare a QE input file that specifies the initial molecular geometry of the system and any other desired settings.</li>
<li>Launch QE using the "<code>-mdi"</code> runtime option, which is described in <a class="el" href="library_page.html#library_launching_sec">Launching Codes with the MDI Library</a>. For example: <pre class="fragment">pw.x -in qe.in -mdi "-role ENGINE -name my_name -method TCP -port 8021 -hostname localhost" &amp;
</pre></li>
</ol>
<h1><a class="anchor" id="ecosystem_tinker"></a>
Tinker</h1>
<p><a href="https://github.com/taylor-a-barnes/Tinker/tree/mdi">An MDI-enabled fork</a> of <a href="https://dasher.wustl.edu/tinker/">Tinker</a> is available that can be run as an MDI engine. To use Tinker as an engine, follow these steps:</p>
<ol type="1">
<li>Acquire the MDI-enabled fork of Tinker: <pre class="fragment">git clone --branch mdi git@github.com:taylor-a-barnes/Tinker.git
</pre></li>
<li>Compile dynamic.x, following the <a href="https://dasher.wustl.edu/tinker/downloads/guide.pdf">Tinker build guide</a>.</li>
<li>Prepare Tinker input files that specify the initial molecular geometry of the system and any other desired settings.</li>
<li>Launch Tinker using the "<code>-mdi"</code> runtime option, which is described in <a class="el" href="library_page.html#library_launching_sec">Launching Codes with the MDI Library</a>. For example: <pre class="fragment">dynamic.x input -mdi "-role ENGINE -name MM -method TCP -port 8021 -hostname localhost" 1000 1.0 10.0 2 298.0 778.0
</pre> </li>
</ol>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.16-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
