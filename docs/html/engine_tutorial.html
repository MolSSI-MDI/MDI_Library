<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Molssi Driver Interface Library: Engine Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
  <td id="projectlogo"><img alt="Logo" src="mdi_main_logo_text_300x204.png"/></td>
  <td id="projectalign" style="padding-left: 6.0em;">
   <div id="projectname">Molssi Driver Interface Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Engine Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="engine_tutorial_intro"></a>
Introduction</h1>
<p>This tutorial will guide you through the process of implementing a support for MDI in an existing engine.</p>
<p> 
<style>
code
{
    color: #733;
}

.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #b1bfde;
}

.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 6px 16px;
  transition: 0.3s;
  font-size: 17px;
}

.tab button:hover {
  background-color: #a2b6e1;
}

.tab button.active {
  background-color: #96ade0;
}

.tab button.cxx, button.fortran, button.python {
}

.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
  background-color: #e1e7f6;
}
.tabcontent.cxx, .tabcontent.fortran, .tabcontent.python {
}
</style>
<script>
function revealTabContent(evt, code_name) {
  var i, tabcontent, tabbuttons;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tabbuttons = document.getElementsByClassName("tabbuttons");
  for (i = 0; i < tabbuttons.length; i++) {
    tabbuttons[i].className = tabbuttons[i].className.replace(" active", "");
  }

  var content_name = "tabcontent";
  content_name = content_name.concat(" ");
  content_name = content_name.concat(code_name);
  var contents = document.getElementsByClassName(content_name);
  for (i = 0; i < contents.length; i++) {
    contents[i].style.display = "block";
  }

  var button_name = "tabbuttons";
  button_name = button_name.concat(" ");
  button_name = button_name.concat(code_name);
  tabbuttons = document.getElementsByClassName(button_name);
  for (i = 0; i < tabbuttons.length; i++) {
    tabbuttons[i].className += " active";
  }
}
</script>
</p>
<h1><a class="anchor" id="engine_tutorial_link"></a>
Step 8: Make the MDI Library Available to the Engine</h1>
<p>In this step, we will ensure that MDI functions can be called from your engine.</p>
<p> 
<div class="tab">
  <button class="tabbuttons cxx" onclick="revealTabContent(event, 'cxx')">C++</button>
  <button class="tabbuttons fortran" onclick="revealTabContent(event, 'fortran')">Fortran</button>
  <button class="tabbuttons python" onclick="revealTabContent(event, 'python')">Python</button>
</div>

<div class="tabcontent cxx">
 Your engine must be compiled and linked against the MDI Library. The MDI Library is released under a highly permissive BSD-3 License, and developers of MDI-enabled codes are encouraged to copy the MDI Library directly into distributions of their software. If your code uses Git for version control, you can include the MDI Library in your engine's source code repository as either a subtree (recommended) or a submodule. To incorporate a distribution of the MDI Library into your engine as a subtree, you can execute the following command in the top directory of the <em>engine's</em> Git repository (<b>not</b> in the top directory of the <em>MDI-report</em> repository): </p><div class="fragment"><div class="line">git subtree add --prefix=lib/mdi https://github.com/MolSSI-MDI/MDI_Library master --squash</div></div><!-- fragment --><p> The argument to the <code>--prefix</code> option indicates the location where the MDI Library source code will reside, and can be changed to better fit your engine's directory structure.</p>
<p>You must then modify your engine's build process to build the MDI Library and link against it. The MDI Library builds using CMake. If your engine also builds using CMake, you can simply include the MDI Library as a CMake subpackage. Otherwise, you can add a few lines to your engine's existing build scripts to execute CMake and build the MDI Library. The following lines illustrate how the MDI Library could be built, assuming that the source code for the MDI Library is located in <code>lib/mdi</code>: </p><div class="fragment"><div class="line">mkdir -p lib/mdi/build</div><div class="line">cd lib/mdi/build</div><div class="line">cmake -Dlibtype=STATIC -Dlanguage=C -DCMAKE_INSTALL_PREFIX=../install ..</div><div class="line">make</div><div class="line">make install</div></div><!-- fragment --><p> The following CMake configuration options are likely to be useful:</p><ul>
<li><b>-Dlibtype</b>: Set this to <code>STATIC</code>.</li>
<li><b>-Dlanguage</b>: Set this to the language of the code you intend to link to the MDI library. Valid options are <code>C</code>, <code>CXX</code> (for C++), <code>Fortran</code>, and <code>Python</code>.</li>
<li><b>-DCMAKE_C_COMPILER</b>: Set this to the C compiler used to build your engine (if applicable).</li>
<li><b>-DCMAKE_Fortran_COMPILER</b>: Set this to the Fortran compiler used to build your engine (if applicable).</li>
<li><b>-DCMAKE_INSTALL_PREFIX</b>: Set this to the destination directory for the installation.</li>
</ul>
<p>Finally, during the link stage of your build process, you will need to ensure that your code is linked against the MDI Library. In the case of the above example build process, the compiled static library file will be located at <code>${CMAKE_INSTALL_PREFIX}/lib/mdi</code>, and will typically be called <code>libmdi.a</code> on POSIX systems.</p>
<p> 
</div>

<div class="tabcontent fortran">
 Your engine must be compiled and linked against the MDI Library. The MDI Library is released under a highly permissive BSD-3 License, and developers of MDI-enabled codes are encouraged to copy the MDI Library directly into distributions of their software. If your code uses Git for version control, you can include the MDI Library in your engine's source code repository as either a subtree (recommended) or a submodule. To incorporate a distribution of the MDI Library into your engine as a subtree, you can execute the following command in the top directory of the <em>engine's</em> Git repository (<b>not</b> in the top directory of the <em>MDI-report</em> repository): </p><div class="fragment"><div class="line">git subtree add --prefix=lib/mdi https://github.com/MolSSI-MDI/MDI_Library master --squash</div></div><!-- fragment --><p> The argument to the <code>--prefix</code> option indicates the location where the MDI Library source code will reside, and can be changed to better fit your engine's directory structure.</p>
<p>You must then modify your engine's build process to build the MDI Library and link against it. The MDI Library builds using CMake. If your engine also builds using CMake, you can simply include the MDI Library as a CMake subpackage. Otherwise, you can add a few lines to your engine's existing build scripts to execute CMake and build the MDI Library. The following lines illustrate how the MDI Library could be built, assuming that the source code for the MDI Library is located in <code>lib/mdi</code>: </p><div class="fragment"><div class="line">mkdir -p lib/mdi/build</div><div class="line">cd lib/mdi/build</div><div class="line">cmake -Dlibtype=STATIC -Dlanguage=Fortran -DCMAKE_INSTALL_PREFIX=../install ..</div><div class="line">make</div><div class="line">make install</div></div><!-- fragment --><p> The following CMake configuration options are likely to be useful:</p><ul>
<li><b>-Dlibtype</b>: Set this to <code>STATIC</code>.</li>
<li><b>-Dlanguage</b>: Set this to the language of the code you intend to link to the MDI library. Valid options are <code>C</code>, <code>CXX</code> (for C++), <code>Fortran</code>, and <code>Python</code>.</li>
<li><b>-DCMAKE_C_COMPILER</b>: Set this to the C compiler used to build your engine (if applicable).</li>
<li><b>-DCMAKE_Fortran_COMPILER</b>: Set this to the Fortran compiler used to build your engine (if applicable).</li>
<li><b>-DCMAKE_INSTALL_PREFIX</b>: Set this to the destination directory for the installation.</li>
</ul>
<p>Finally, during the link stage of your build process, you will need to ensure that your code is linked against the MDI Library. In the case of the above example build process, the compiled static library file will be located at <code>${CMAKE_INSTALL_PREFIX}/lib/mdi</code>, and will typically be called <code>libmdi.a</code> on POSIX systems.</p>
<p> 
</div>

<div class="tabcontent python">
 First, install the MDI Library during the <code>build_image</code> step in <code>mdimechanic.yml</code>. This can be done trivially using <code>pip</code> (<em>e.g.</em> <code>pip install pymdi</code>). Your engine can then import the MDI Library where needed (<em>e.g.</em> <code>import mdi</code>).  
</div>
</p>
<h1><a class="anchor" id="engine_tutorial_input"></a>
Step 9: Support User Input of the MDI Options</h1>
<p>In this step, we will ensure that MDI functions can be called from your engine.</p>
<p> 
<div class="tab">
  <button class="tabbuttons cxx" onclick="revealTabContent(event, 'cxx')">C++</button>
  <button class="tabbuttons fortran" onclick="revealTabContent(event, 'fortran')">Fortran</button>
  <button class="tabbuttons python" onclick="revealTabContent(event, 'python')">Python</button>
</div>

<div class="tabcontent cxx">
 Your engine must be compiled and linked against the MDI Library. The MDI Library is released under a highly permissive BSD-3 License, and developers of MDI-enabled codes are encouraged to copy the MDI Library directly into distributions of their software. If your code uses Git for version control, you can include the MDI Library in your engine's source code repository as either a subtree (recommended) or a submodule. To incorporate a distribution of the MDI Library into your engine as a subtree, you can execute the following command in the top directory of the <em>engine's</em> Git repository (<b>not</b> in the top directory of the <em>MDI-report</em> repository): </p><div class="fragment"><div class="line">git subtree add --prefix=lib/mdi https://github.com/MolSSI-MDI/MDI_Library master --squash</div></div><!-- fragment --><p> The argument to the <code>--prefix</code> option indicates the location where the MDI Library source code will reside, and can be changed to better fit your engine's directory structure.</p>
<p>You must then modify your engine's build process to build the MDI Library and link against it. The MDI Library builds using CMake. If your engine also builds using CMake, you can simply include the MDI Library as a CMake subpackage. Otherwise, you can add a few lines to your engine's existing build scripts to execute CMake and build the MDI Library. The following lines illustrate how the MDI Library could be built, assuming that the source code for the MDI Library is located in <code>lib/mdi</code>: </p><div class="fragment"><div class="line">mkdir -p lib/mdi/build</div><div class="line">cd lib/mdi/build</div><div class="line">cmake -Dlibtype=STATIC -Dlanguage=C -DCMAKE_INSTALL_PREFIX=../install ..</div><div class="line">make</div><div class="line">make install</div></div><!-- fragment --><p> The following CMake configuration options are likely to be useful:</p><ul>
<li><b>-Dlibtype</b>: Set this to <code>STATIC</code>.</li>
<li><b>-Dlanguage</b>: Set this to the language of the code you intend to link to the MDI library. Valid options are <code>C</code>, <code>CXX</code> (for C++), <code>Fortran</code>, and <code>Python</code>.</li>
<li><b>-DCMAKE_C_COMPILER</b>: Set this to the C compiler used to build your engine (if applicable).</li>
<li><b>-DCMAKE_Fortran_COMPILER</b>: Set this to the Fortran compiler used to build your engine (if applicable).</li>
<li><b>-DCMAKE_INSTALL_PREFIX</b>: Set this to the destination directory for the installation.</li>
</ul>
<p>Finally, during the link stage of your build process, you will need to ensure that your code is linked against the MDI Library. In the case of the above example build process, the compiled static library file will be located at <code>${CMAKE_INSTALL_PREFIX}/lib/mdi</code>, and will typically be called <code>libmdi.a</code> on POSIX systems.</p>
<p> 
</div>

<div class="tabcontent fortran">
 Your engine must be compiled and linked against the MDI Library. The MDI Library is released under a highly permissive BSD-3 License, and developers of MDI-enabled codes are encouraged to copy the MDI Library directly into distributions of their software. If your code uses Git for version control, you can include the MDI Library in your engine's source code repository as either a subtree (recommended) or a submodule. To incorporate a distribution of the MDI Library into your engine as a subtree, you can execute the following command in the top directory of the <em>engine's</em> Git repository (<b>not</b> in the top directory of the <em>MDI-report</em> repository): </p><div class="fragment"><div class="line">git subtree add --prefix=lib/mdi https://github.com/MolSSI-MDI/MDI_Library master --squash</div></div><!-- fragment --><p> The argument to the <code>--prefix</code> option indicates the location where the MDI Library source code will reside, and can be changed to better fit your engine's directory structure.</p>
<p>You must then modify your engine's build process to build the MDI Library and link against it. The MDI Library builds using CMake. If your engine also builds using CMake, you can simply include the MDI Library as a CMake subpackage. Otherwise, you can add a few lines to your engine's existing build scripts to execute CMake and build the MDI Library. The following lines illustrate how the MDI Library could be built, assuming that the source code for the MDI Library is located in <code>lib/mdi</code>: </p><div class="fragment"><div class="line">mkdir -p lib/mdi/build</div><div class="line">cd lib/mdi/build</div><div class="line">cmake -Dlibtype=STATIC -Dlanguage=Fortran -DCMAKE_INSTALL_PREFIX=../install ..</div><div class="line">make</div><div class="line">make install</div></div><!-- fragment --><p> The following CMake configuration options are likely to be useful:</p><ul>
<li><b>-Dlibtype</b>: Set this to <code>STATIC</code>.</li>
<li><b>-Dlanguage</b>: Set this to the language of the code you intend to link to the MDI library. Valid options are <code>C</code>, <code>CXX</code> (for C++), <code>Fortran</code>, and <code>Python</code>.</li>
<li><b>-DCMAKE_C_COMPILER</b>: Set this to the C compiler used to build your engine (if applicable).</li>
<li><b>-DCMAKE_Fortran_COMPILER</b>: Set this to the Fortran compiler used to build your engine (if applicable).</li>
<li><b>-DCMAKE_INSTALL_PREFIX</b>: Set this to the destination directory for the installation.</li>
</ul>
<p>Finally, during the link stage of your build process, you will need to ensure that your code is linked against the MDI Library. In the case of the above example build process, the compiled static library file will be located at <code>${CMAKE_INSTALL_PREFIX}/lib/mdi</code>, and will typically be called <code>libmdi.a</code> on POSIX systems.</p>
<p> 
</div>

<div class="tabcontent python">
 Test   </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.16-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
