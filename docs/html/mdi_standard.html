<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TFBQ45D');</script>
<!-- End Google Tag Manager -->
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Molssi Driver Interface Library: MDI Standard</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
 <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TFBQ45D"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
  <td id="projectlogo"><img alt="Logo" src="mdi_main_logo_text_300x204.png"/></td>
  <td id="projectalign" style="padding-left: 6.0em;">
   <div id="projectname">Molssi Driver Interface Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MDI Standard </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="standard_overview"></a>
Overview</h1>
<p>The MDI Standard provides a straightforward, API-like method for enabling interoperability among computational molecular sciences codes. It uses a driver/engine model in which a driver code controls the high-level program flow of one or more engine codes. The driver exercises this control through the use of <a class="el" href="mdi_standard.html#command_list">commands</a> that are defined by the MDI Standard. Commands are available that correspond to a variety of tasks, such as "receive a new set of nuclear coordinates from me" (<a class="el" href="mdi_standard.html#send_coords">&gt;COORDS</a>), "start an MD simulation" (<a class="el" href="mdi_standard.html#init_md">@INIT_MD</a>) and "send me the forces on the nuclei" (<a class="el" href="mdi_standard.html#recv_forces">&lt;FORCES</a>). The MDI standard defines the <a class="el" href="mdi_standard.html#standard_units">units</a>, data types, and formatting of any data communicated between codes in response to a command.</p>
<h1><a class="anchor" id="standard_extension"></a>
Extending the MDI Standard</h1>
<p>Although the MDI Standard has been designed to enable a wide range of potential applications, it is inevitable that some use cases will require functionality that is not yet supported by the standard. Typically, supporting such use cases will simply require addition of one or more new <a class="el" href="mdi_standard.html#command_list">commands</a> to the MDI Standard. Users who find themselves in need of a new MDI command are encouraged to create an <a href="https://github.com/MolSSI-MDI/MDI_Library/issues">issue</a> describing their needs or submit a <a href="https://github.com/MolSSI-MDI/MDI_Library/pulls">pull request</a> suggesting a solution.</p>
<h1><a class="anchor" id="standard_units"></a>
Units</h1>
<p>All physical quantities communicated through MDI must be expressed in atomic units. Whenever it is necessary to perform a unit conversion on data communicated through MDI, the conversion factor should be obtained through the <a class="el" href="mdi_8c.html#aa1ccf61d45e842b50d72084735cb984a" title="Determine the conversion factor between two units.">MDI_Conversion_Factor()</a> function. Use of this function ensures self-consistency in unit conversions between codes, which is important for avoiding numerical instabilities.</p>
<h1><a class="anchor" id="standard_nodes_sec"></a>
Nodes</h1>
<p>One of the powerful features of the MDI Standard is that it permits drivers to take advantage of existing implementations of time integrators and geometry optimizers in MDI engines. In particular, the <a class="el" href="mdi_standard.html#init_md">@INIT_MD</a> and <a class="el" href="mdi_standard.html#init_optg">@INIT_OPTG</a> commands cause an engine to begin a molecular dynamics trajectory or a geometry optimization, respectively. Upon receiving one of these commands, an engine will perform the corresponding simulation without requiring further instruction from the driver, except that it will pause at certain "nodes" and listen for new commands.</p>
<p>The MDI Standard defines several nodes. Their names and when they occur are as follows:</p>
<dl class="section user"><dt></dt><dd><b> @DEFAULT </b> - Upon initially connecting to the driver. <br  />
 <b> @INIT_MC </b> - Upon initializing a new Monte Carlo simulation. <br  />
 <b> @INIT_MD </b> - Upon initializing a new molecular dynamics simulation. <br  />
 <b> @INIT_OPTG </b> - Upon initializing a new geometry optimization. <br  />
</dd></dl>
<p>Not all MDI engines are required to support each of these nodes, with the exception of the @DEFAULT node, which every MDI engine must support. Additional nodes may be defined by individual codes. Examples of possible code-specific nodes include:</p>
<dl class="section user"><dt></dt><dd><b> @PRE-FORCES </b> - After calculating all contributions to the atomic forces, <b>except</b> those associated with a constraint algorithm like SHAKE or RATTLE. <br  />
 <b> @FORCES </b> - After calculating all contributions to the atomic forces. <br  />
 <b> @COORDS </b> - After updating the atomic coordinates.</dd></dl>
<p>Several MDI commands enable a driver to control the program flow of an engine through different nodes. The <a class="el" href="mdi_standard.html#send_node">&lt;@</a> command instructs the engine to send the name of its node, while the <a class="el" href="mdi_standard.html#next_node">@</a> command instructs the engine to proceed in its simulation until it reaches the next node. In addition, there are commands associated with each type of node (<a class="el" href="mdi_standard.html#pre-forces_node">@PRE-FORCES</a>, <a class="el" href="mdi_standard.html#forces_node">@FORCES</a>, <a class="el" href="mdi_standard.html#coords_node">@COORDS</a>) which instruct the engine to proceed in its simulation until it reaches the next node of that particular type.</p>
<p>A specific MD implementation might progress from a @PRE-FORCES node, to the @FORCES node, to the @COORDS node, and then repeat the cycle; however, this behavior is <b>not</b> guaranteed. Engines are permitted to pass through nodes in whatever order the implementation dictates. When writing drivers, it is a best practice to avoid assumptions about the ordering or frequency of nodes.</p>
<p>The MDI Library provides several functions that allow codes to define and communicate information about which nodes are supported:</p>
<ul>
<li><a class="el" href="mdi_8c.html#ada45c73f15462764df0ac9e733b7d18e" title="Register a node.">MDI_Register_Node()</a></li>
<li><a class="el" href="mdi_8c.html#aeddcd7109a1206ce89a187960bfb3069" title="Check whether a node is supported on a specified engine.">MDI_Check_Node_Exists()</a></li>
<li><a class="el" href="mdi_8c.html#aa5988eb94d4e447720c3728f2ce1e310" title="Get the number of nodes on a specified engine.">MDI_Get_NNodes()</a></li>
<li><a class="el" href="mdi_8c.html#a45bec162cf811d5f6411abd143e26af4" title="Get the name of a node on a specified engine.">MDI_Get_Node()</a></li>
</ul>
<p>Engines are not required to support every MDI command at every node. The MDI Library provides several functions that allow codes to define and communicate information about which commands are supported at specific nodes:</p>
<ul>
<li><a class="el" href="mdi_8c.html#a8eade50fb64b5bf5919b35cc2071952d" title="Register a command on a specified node.">MDI_Register_Command()</a></li>
<li><a class="el" href="mdi_8c.html#a013856347b9026a7eb01e7803b3dc9b5" title="Check whether a command is supported on specified node on a specified engine.">MDI_Check_Command_Exists()</a></li>
<li><a class="el" href="mdi_8c.html#a82ee6d49380e2c24428aa6e5447c4567" title="Get the number of commands supported for a specified node on a specified engine.">MDI_Get_NCommands()</a></li>
<li><a class="el" href="mdi_8c.html#a632b49a3e745b7b381b60de530699298" title="Get the name of a command on a specified node on a specified engine.">MDI_Get_Command()</a></li>
</ul>
<h1><a class="anchor" id="standard_constants_sec"></a>
Constants</h1>
<p>The following constants are defined by the MDI Standard and are accessible through the <a class="el" href="library_page.html">MDI Library</a>:</p>
<ul>
<li><code>MDI_MPI</code> - Identifier for the MPI communication method</li>
<li><code>MDI_TCP</code> - Identifier for the TCP communication method</li>
<li><code>MDI_LINK</code> - Identifier for the LINK communication method</li>
<li><code>MDI_TEST</code> - Identifier for the TEST communication method</li>
<li><code>MDI_DRIVER</code> - Identifier for the DRIVER role</li>
<li><code>MDI_ENGINE</code> - Identifier for the ENGINE role</li>
<li><code>MDI_INT</code> - Data type identifier for integers</li>
<li><code>MDI_DOUBLE</code> - Data type identifier for double precision floats</li>
<li><code>MDI_CHAR</code> - Data type identifier for characters</li>
<li><code>MDI_INT_NUMPY</code> - Data type identifier for Python NumPy integer arrays</li>
<li><code>MDI_DOUBLE_NUMPY</code> - Data type identifier for Python NumPy double arrays</li>
<li><code>MDI_NAME_LENGTH</code> - Maximum number of characters in the name of an MDI code (see <a class="el" href="library_page.html#library_launching_sec">Launching Codes with the MDI Library</a>) or node (see <a class="el" href="mdi_standard.html#standard_nodes_sec">Nodes</a>)</li>
<li><code>MDI_COMMAND_LENGTH</code> - Maximum number of characters in an MDI command (see <a class="el" href="mdi_standard.html#command_list">Command List</a>)</li>
</ul>
<h1><a class="anchor" id="command_list"></a>
Command List</h1>
<p>The following is a list of commands that are officially part of the MDI standard.</p>
<h2><a class="anchor" id="next_node"></a>
@</h2>
<p>The engine proceeds to the next node (see <a class="el" href="mdi_standard.html#standard_nodes_sec">Nodes</a>). This command is typically not supported at the <code>@DEFAULT</code>  node.</p>
<h2><a class="anchor" id="send_node"></a>
&lt;@</h2>
<p>The engine sends the driver a string that corresponds to the name of its current node (see <a class="el" href="mdi_standard.html#standard_nodes_sec">Nodes</a>).</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_CHAR</code> <br  />
 <b> Quantity: </b> <code> MDI_NAME_LENGTH </code></dd></dl>
<h2><a class="anchor" id="recv_cdensity"></a>
&lt;CDENSITY</h2>
<p>The engine sends the Cartesian coordinates of a set of grid points. This command is intended to be used in conjuction with the <a class="el" href="mdi_standard.html#recv_ndensity">&lt;NDENSITY</a> and <a class="el" href="mdi_standard.html#recv_density">&lt;DENSITY</a> commands; these three commands enable a driver to acquire the electronic density distribution of an engine in a grid representation. See the <a class="el" href="mdi_standard.html#recv_density">&lt;DENSITY</a> command for more details.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 3 * NDENSITY </code></dd></dl>
<h2><a class="anchor" id="send_cell"></a>
&gt;CELL</h2>
<p>The driver sends a set of cell vectors to the engine, which resizes its simulation cell to the dimensions specified by the cell vectors.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 9 <br  />
 <b> Format: </b> The first 3 values correspond to the x, y, and z values, respectively, of the first cell vector. The next 3 values correspond to the x, y, and z values, respectively, of the second cell vector. The next 3 values correspond to the x, y, and z values, respectively, of the third cell vector. <br  />
</dd></dl>
<h2><a class="anchor" id="recv_cell"></a>
&lt;CELL</h2>
<p>The engine sends a set of cell vectors to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 9 <br  />
 <b> Format: </b> The first 3 values correspond to the x, y, and z values, respectively, of the first cell vector. The next 3 values correspond to the x, y, and z values, respectively, of the second cell vector. The next 3 values correspond to the x, y, and z values, respectively, of the third cell vector. <br  />
</dd></dl>
<h2><a class="anchor" id="send_cell_displ"></a>
&gt;CELL_DISPL</h2>
<p>The driver sends a displacement vector to the engine, which adjusts the origin of its simulation cell to the value of the displacement vector.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 3 <br  />
 <b> Format: </b> The 3 values correspond to the x, y, and z values, respectively, of the simulation cell displacement vector. <br  />
</dd></dl>
<h2><a class="anchor" id="recv_cell_displ"></a>
&lt;CELL_DISPL</h2>
<p>The engine sends the displacement vector of the origin of its simulation cell to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 3 <br  />
 <b> Format: </b> The 3 values correspond to the x, y, and z values, respectively, of the simulation cell displacement vector. <br  />
</dd></dl>
<h2><a class="anchor" id="send_charges"></a>
&gt;CHARGES</h2>
<p>The driver sends a set of atomic charges to the engine, which replaces its atomic charges with those sent by the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code>NATOMS</code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index <br  />
</dd></dl>
<h2><a class="anchor" id="recv_charges"></a>
&lt;CHARGES</h2>
<p>The engine sends a set of atomic charges to the driver, in the same format as specified for the <code>&gt;CHARGES</code> command.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code>NATOMS</code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index</dd></dl>
<h2><a class="anchor" id="send_clattice"></a>
&gt;CLATTICE</h2>
<p>This command, along with the <code>&gt;NLATTICE</code> and <code>&gt;LATTICE</code> commands, allows the driver to assign a lattice of point charges to an engine, which incorporates the effects of these charges in all further calculations. After sending this command, the driver sends the coordinates of each of the point charges to the engine. Prior to sending this command, the driver must have set the number of point charges using the <code>&gt;NLATTICE</code> command.</p>
<p>This command is primarily intended for use with gas-phase quantum mechanics codes. For an alternative command that is more appropriate for plane wave quantum mechanics codes, see the <code>&gt;POTENTIAL</code> command.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 3 * NLATTICE </code> <br  />
 <b> Format: </b> Sequentially ascending order of point charge index, with the coordinates for each individual point charge being provided in xyz order</dd></dl>
<h2><a class="anchor" id="coords_node"></a>
@COORDS</h2>
<p>The engine proceeds to the next <code>@COORDS</code>  node (see <a class="el" href="mdi_standard.html#standard_nodes_sec">Nodes</a>). This command is not valid at the <code>@DEFAULT</code>  node.</p>
<h2><a class="anchor" id="send_coords"></a>
&gt;COORDS</h2>
<p>The driver sends a set of atomic coordinates to the engine, which replaces its atomic coordinates with those sent by the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 3 * NATOMS </code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index, with the coordinates for each individual atom being provided in xyz order <br  />
</dd></dl>
<h2><a class="anchor" id="recv_coords"></a>
&lt;COORDS</h2>
<p>The engine sends a set of atomic coordinates to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 3 * NATOMS </code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index, with the coordinates for each individual atom being provided in xyz order</dd></dl>
<h2><a class="anchor" id="send_cpotential"></a>
&gt;CPOTENTIAL</h2>
<p>The driver sends the Cartesian coordinates of a set of grid points. This command is intended to be used in conjuction with the <a class="el" href="mdi_standard.html#send_npotential">&gt;NPOTENTIAL</a> and <a class="el" href="mdi_standard.html#send_potential">&gt;POTENTIAL</a> commands; these three commands enable a driver to set an external potential that is incorporated into a subsequent scf_command command. See the <a class="el" href="mdi_standard.html#send_potential">&gt;POTENTIAL</a> command for more details.</p>
<p>Before sending this command, the driver must have first sent the number of grid points used to represent the potential via the <a class="el" href="mdi_standard.html#send_npotential">&gt;NPOTENTIAL</a> command. It is also necessary that the driver send the values of the grid points via the <a class="el" href="mdi_standard.html#send_cpotential">&gt;CPOTENTIAL</a> command prior to any subsequent scf_command command.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 3 * NPOTENTIAL </code></dd></dl>
<h2><a class="anchor" id="default_node"></a>
@DEFAULT</h2>
<p>If not already at the <code>@DEFAULT</code>  node, the engine exists whatever simulation (i.e. MD, OPTG, etc.) it is performing (possibly after completing an unfinished time step or geometry optimization step) and returns to the <code>@DEFAULT</code>  node.</p>
<h2><a class="anchor" id="recv_density"></a>
&lt;DENSITY</h2>
<p>The engine sends the value of its electronic density on a set of grid points. This command is intended to be used in conjuction with the <a class="el" href="mdi_standard.html#recv_ndensity">&lt;NDENSITY</a> and <a class="el" href="mdi_standard.html#recv_cdensity">&lt;CDENSITY</a> commands; these three commands enable a driver to acquire the electronic density distribution of an engine in a grid representation.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code>NDENSITY</code> </dd></dl>
<h2><a class="anchor" id="recv_dimensions"></a>
&lt;DIMENSIONS</h2>
<p>The engine sends basic information about the dimensionality of its system to the driver. For each of its three cell vectors (see the <code>&lt;CELL</code> command) the engine sends an integer that indicates whether that dimension is represented as periodic, non-periodic, or not represented at all (in the case of 1d or 2d systems). The possible values for each cell vector are:</p>
<ul>
<li>0: Not represented</li>
<li>1: Non-periodic</li>
<li>2: Periodic</li>
</ul>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_INT</code> <br  />
 <b> Quantity: </b> 3 <br  />
 <b> Format: </b> Sequentially ascending order of cell vector (see the &lt;CELL command)</dd></dl>
<h2><a class="anchor" id="send_mult"></a>
&gt;ELEC_MULT</h2>
<p>The driver sends the electronic multiplicity of the system to the engine. This command is typically only appropriate for quantum mechanics engines.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_INT</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="recv_mult"></a>
&lt;ELEC_MULT</h2>
<p>The engine sends the electronic multiplicity of its system to the driver. This command is typically only appropriate for quantum mechanics engines.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_INT</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="recv_elements"></a>
&lt;ELEMENTS</h2>
<p>The engine sends the atomic number of each element in its system to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_INT</code> <br  />
 <b> Quantity: </b> <code>NATOMS</code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index</dd></dl>
<h2><a class="anchor" id="recv_energy"></a>
&lt;ENERGY</h2>
<p>If the engine is at the <code>@DEFAULT</code>  node, it calculates and sends its total energy to the driver. If the engine has previously calculated the energy of the system, and no intervening commands from the driver could have changed the energy, the engine is permitted to send the previously calculated energy instead of recalculating it.</p>
<p>If the engine is not at the <code>@DEFAULT</code>  node, it sends its most recently calculated total energy to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="exit_command"></a>
EXIT</h2>
<p>The engine terminates and can no longer be sent commands.</p>
<h2><a class="anchor" id="forces_node"></a>
@FORCES</h2>
<p>The engine proceeds to the next <code>@FORCES</code>  node (see <a class="el" href="mdi_standard.html#standard_nodes_sec">Nodes</a>). This command is not valid at the <code>@DEFAULT</code>  node.</p>
<h2><a class="anchor" id="send_forces"></a>
&gt;FORCES</h2>
<p>The driver sends a set of atomic forces to the engine, which replaces its internal forces with the forces sent by the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 3 * NATOMS </code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index, with the forces for each individual atom being provided in xyz order <br  />
</dd></dl>
<h2><a class="anchor" id="send_add_forces"></a>
&gt;+FORCES</h2>
<p>The driver sends a set of atomic forces to the engine, which adds the forces sent by the driver to its internal forces.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 3 * NATOMS </code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index, with the forces for each individual atom being provided in xyz order <br  />
</dd></dl>
<h2><a class="anchor" id="recv_forces"></a>
&lt;FORCES</h2>
<p>If the engine is at the <code>@DEFAULT</code>  node, it calculates and sends its atomic forces to the driver. These forces include all force contributions, including the force contributions associated with any constraint algorithm (e.g. SHAKE, RATTLE, etc.). If the engine has previously calculated the atomic forces of the system, and no intervening commands from the driver could have changed the atomic forces, the engine is permitted to send the previously calculated atomic forces instead of recalculating them.</p>
<p>If the engine is not at the <code>@DEFAULT</code>  node, it sends its most recently calculated atomic forces to the driver. Depending on the engine's current node, these forces may not include all contributions to the atomic forces. See the descriptions of the different nodes for more details.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 3 * NATOMS </code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index, with the forces for each individual atom being provided in xyz order</dd></dl>
<h2><a class="anchor" id="init_mc"></a>
@INIT_MC</h2>
<p>The engine performs any initialization operations that are necessary before a Monte Carlo simulation can be performed, proceeding to the @INIT_MC node.</p>
<h2><a class="anchor" id="init_md"></a>
@INIT_MD</h2>
<p>The engine performs any initialization operations that are necessary before a molecular dynamics simulation can be performed, proceeding to the @INIT_MD node.</p>
<dl class="section user"><dt></dt><dd><b> Note: </b> This command may change the engine's atomic coordinates under certain circumstances, such as if the SHAKE algorithm is used.</dd></dl>
<h2><a class="anchor" id="init_optg"></a>
@INIT_OPTG</h2>
<p>The engine performs any initialization operations that are necessary before a geometry optimization can be performed, proceeding to the @INIT_OPTG node.</p>
<dl class="section user"><dt></dt><dd><b> Note: </b> This command may change the engine's atomic coordinates under certain circumstances, such as if the SHAKE algorithm is used.</dd></dl>
<h2><a class="anchor" id="recv_ke"></a>
&lt;KE</h2>
<p>If the engine is at the <code>@DEFAULT</code>  node, it calculates and sends its total kinetic energy to the driver. If the engine has previously calculated the energy of the system, and no intervening commands from the driver could have changed the energy, the engine is permitted to send the previously calculated energy instead of recalculating it.</p>
<p>If the engine is not at the <code>@DEFAULT</code>  node, it sends its most recently calculated total kinetic energy to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="recv_ke_elec"></a>
&lt;KE_ELEC</h2>
<p>If the engine is at the <code>@DEFAULT</code>  node, it calculates and sends the total kinetic energy of all electrons in its system to the driver. If the engine has previously calculated the energy of the system, and no intervening commands from the driver could have changed the energy, the engine is permitted to send the previously calculated energy instead of recalculating it.</p>
<p>If the engine is not at the <code>@DEFAULT</code>  node, it sends its most recently calculated electronic kinetic energy to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="recv_ke_nuc"></a>
&lt;KE_NUC</h2>
<p>If the engine is at the <code>@DEFAULT</code>  node, it calculates and sends the total kinetic energy of all nuclei in its system to the driver. If the engine has previously calculated the energy of the system, and no intervening commands from the driver could have changed the energy, the engine is permitted to send the previously calculated energy instead of recalculating it.</p>
<p>If the engine is not at the <code>@DEFAULT</code>  node, it sends its most recently calculated nuclear kinetic energy to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="send_stress"></a>
&lt;LABELS</h2>
<p>The engine sends a label for each atom in its system. "Labels" are intended primarily for the purpose of providing a human-readable identifier for each of the atoms, and do not have a standardized physical meaning. It is recommended that the labels correspond to the element of each atom (i.e., "H", "He", "Li", etc.), a name associated with atoms of a particular type (i.e., "Carboxyl_Hydrogen", "Methyl_Hydrogen"), or a similarly descriptive term. The atom labels may correspond to a number identifier (i.e., "1", "2", "3", etc.) in cases where more descriptive labels are not practical, but note that such labels must be represented using the <code>MDI_CHAR</code> data type, as indicated below. It is required that atoms having different physical properties (i.e., different force field terms in a molecular mechanics simulation or different nuclear charges in a quantum chemistry simulation) have different labels.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_CHAR</code> <br  />
 <b> Quantity: </b> <code>MDI_LABEL_LENGTH</code> * <code>NATOMS</code> <br  />
 <b> Format: </b> An array of characters corresponding to the label of each atom in ascending order of atomic index, with each label consisting of <code>MDI_LABEL_LENGTH</code> characters and being padded with spaces (" ") where necessary <br  />
</dd></dl>
<h2><a class="anchor" id="send_lattice"></a>
&gt;LATTICE</h2>
<p>This command, along with the <code>&gt;NLATTICE</code> and <code>&gt;CLATTICE</code> commands, allows the driver to assign a lattice of point charges to an engine, which incorporates the effects of these charges in all further calculations. After sending this command, the driver sends the charges of each of the point charges to the engine. Prior to sending this command, the driver must have set the number of point charges using the <code>&gt;NLATTICE</code> command.</p>
<p>This command is primarily intended for use with gas-phase quantum mechanics codes. For an alternative command that is more appropriate for plane wave quantum mechanics codes, see the <code>&gt;POTENTIAL</code> command.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> NLATTICE </code> <br  />
 <b> Format: </b> Sequentially ascending order of point charge index</dd></dl>
<h2><a class="anchor" id="recv_masses"></a>
&lt;MASSES</h2>
<p>The engine sends the driver the mass of each of the atoms.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> &lt;NATOMS </code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index</dd></dl>
<h2><a class="anchor" id="send_name"></a>
&lt;NAME</h2>
<p>The engine sends the driver a string that corresponds to the argument of <code>-name</code> in the MDI initialization options. This argument allows a driver to identify the purpose of connected engine codes within the simulation. For example, a particular QM/MM driver might require a connection with a single MM code and a single QM code, with the expected name of the MM code being "MM" and the expected name of the QM code being "QM". After initializing MDI and accepting communicators to the engines, the driver can use this command to identify which of the engines is the MM code and which is the QM code.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_CHAR</code> <br  />
 <b> Quantity: </b> <code> MDI_NAME_LENGTH </code></dd></dl>
<h2><a class="anchor" id="recv_natoms"></a>
&lt;NATOMS</h2>
<p>The engine sends the driver the number of atoms in the engine's system.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_INT</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="recv_ndensity"></a>
&lt;NDENSITY</h2>
<p>The engine sends the number of grid points it is using to represent its electronic density on a grid. This command is intended to be used in conjuction with the <a class="el" href="mdi_standard.html#recv_cdensity">&lt;CDENSITY</a> and <a class="el" href="mdi_standard.html#recv_density">&lt;DENSITY</a> commands; these three commands enable a driver to acquire the electronic density distribution of an engine in a grid representation. See the <a class="el" href="mdi_standard.html#recv_density">&lt;DENSITY</a> command for more details.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_INT</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="send_nlattice"></a>
&gt;NLATTICE</h2>
<p>This command, along with the <code>&gt;CLATTICE</code> and <code>&gt;LATTICE</code> commands, allows the driver to assign a lattice of point charges to an engine, which incorporates the effects of these charges in all further calculations. After sending this command, the driver sends the number of point charges to the engine. This command must be sent before either the <code>&gt;CLATTICE</code> or <code>&gt;LATTICE</code> commands can be sent.</p>
<p>This command is primarily intended for use with gas-phase quantum mechanics codes. For an alternative command that is more appropriate for plane wave quantum mechanics codes, see the <code>&gt;POTENTIAL</code> command.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_INT</code> <br  />
 <b> Quantity: </b> 1 <br  />
</dd></dl>
<h2><a class="anchor" id="send_npotential"></a>
&gt;NPOTENTIAL</h2>
<p>The driver sends the number of grid points it is using to represent a potential on a grid. This command is intended to be used in conjuction with the <a class="el" href="mdi_standard.html#send_cpotential">&gt;CPOTENTIAL</a> and <a class="el" href="mdi_standard.html#send_potential">&gt;POTENTIAL</a> commands; these three commands enable a driver to set an external potential that is incorporated into a subsequent scf_command command. See the <a class="el" href="mdi_standard.html#send_potential">&gt;POTENTIAL</a> command for more details.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_INT</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="send_potential"></a>
&gt;POTENTIAL</h2>
<p>The driver sends an set of values to the engine that correspond to a potential on a grid. If an scf_command command is later issued, this potential will be incorporated into the SCF calculation as an external potential.</p>
<p>Before sending this command, the driver must have first sent the number of grid points used to represent the potential via the <a class="el" href="mdi_standard.html#send_npotential">&gt;NPOTENTIAL</a> command. It is also necessary that the driver send the Cartesian coordinates of the grid points via the <a class="el" href="mdi_standard.html#send_cpotential">&gt;CPOTENTIAL</a> command prior to any subsequent scf_command command.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code>NPOTENTIAL</code> </dd></dl>
<h2><a class="anchor" id="recv_pe"></a>
&lt;PE</h2>
<p>If the engine is at the <code>@DEFAULT</code>  node, it calculates and sends its total potential energy to the driver. If the engine has previously calculated the energy of the system, and no intervening commands from the driver could have changed the energy, the engine is permitted to send the previously calculated energy instead of recalculating it.</p>
<p>If the engine is not at the <code>@DEFAULT</code>  node, it sends its most recently calculated total potential energy to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="recv_pe_elec"></a>
&lt;PE_ELEC</h2>
<p>If the engine is at the <code>@DEFAULT</code>  node, it calculates and sends its electronic potential energy to the driver. The electronic potential energy is defined as including all interactions between the electrons and any other particles or fields in the system. It also includes the interactions between the electrons and themselves. If the engine has previously calculated the energy of the system, and no intervening commands from the driver could have changed the energy, the engine is permitted to send the previously calculated energy instead of recalculating it.</p>
<p>If the engine is not at the <code>@DEFAULT</code>  node, it sends its most recently calculated electronic potential energy to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="recv_pe_nuc"></a>
&lt;PE_NUC</h2>
<p>If the engine is at the <code>@DEFAULT</code>  node, it calculates and sends its nuclear potential energy to the driver. The nuclear potential energy is defined as including all interactions between the nuclei and any other particles or fields in the system, excluding any electrons. It also includes the interactions between the nuclei and themselves. If the engine has previously calculated the energy of the system, and no intervening commands from the driver could have changed the energy, the engine is permitted to send the previously calculated energy instead of recalculating it.</p>
<p>If the engine is not at the <code>@DEFAULT</code>  node, it sends its most recently calculated electronic potential energy to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="pre-forces_node"></a>
@PRE-FORCES</h2>
<p>The engine proceeds to the next <code> @PRE-FORCES </code> node (see <a class="el" href="mdi_standard.html#standard_nodes_sec">Nodes</a>). This command is not valid at the <code>@DEFAULT</code>  node.</p>
<h2><a class="anchor" id="send_stress"></a>
&lt;LABELS</h2>
<p>The engine sends its virial stress tensor to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 9 <br  />
 <b> Format: </b> The tensor components are sent in row-major order (xx, xy, xz, yx, yy, yz, zx, zy, zz). <br  />
</dd></dl>
<h2><a class="anchor" id="recv_stress"></a>
&gt;STRESS</h2>
<p>The driver sends a virial stress tensor to the engine, which replaces its internal stress tensor with the stress tensor sent by the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 9 <br  />
 <b> Format: </b> The tensor components are sent in row-major order (xx, xy, xz, yx, yy, yz, zx, zy, zz). <br  />
</dd></dl>
<h2><a class="anchor" id="send_totcharge"></a>
&gt;TOTCHARGE</h2>
<p>The driver sends a value for the total charge of the system, including electron and nuclear charges, to the engine, which adjusts the number of electrons present in its system to the value required to reproduce the value sent by the driver. This command is typically only appropriate for quantum mechanics engines. Engines that support this command are not required to support non-integer charges; they are permitted to produce an error message if the value received deviates by more than 10^-12 from an integer, and to otherwise round the value received to the nearest integer.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="recv_totcharge"></a>
&lt;TOTCHARGE</h2>
<p>The engine sends the total charge of its system, including electron and nuclear charges, to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> 1</dd></dl>
<h2><a class="anchor" id="send_velocities"></a>
&gt;VELOCITES</h2>
<p>The driver sends a set of atomic velocities to the driver, which replaces its atomic velocities with those provided by the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 3 * NATOMS </code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index, with the velocities for each individual atom being provided in xyz order</dd></dl>
<h2><a class="anchor" id="recv_velocities"></a>
&lt;VELOCITES</h2>
<p>The engine sends the velocities of the atoms in its system to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 3 * NATOMS </code> <br  />
 <b> Format: </b> Sequentially ascending order of atomic index, with the velocities for each individual atom being provided in xyz order</dd></dl>
<h2><a class="anchor" id="recv_version"></a>
&lt;VERSION</h2>
<p>The engine sends the version number of the MDI Library to which it is linked to the driver.</p>
<dl class="section user"><dt></dt><dd><b> Data Type: </b> <code>MDI_DOUBLE</code> <br  />
 <b> Quantity: </b> <code> 1 </code> <br  />
 </dd></dl>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.16-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
