\hypertarget{mdi__mpi_8c}{}\doxysection{/\+Users/tbarnes/\+Documents/mdi/\+M\+D\+I\+\_\+\+Library/\+M\+D\+I\+\_\+\+Library/mdi\+\_\+mpi.c File Reference}
\label{mdi__mpi_8c}\index{/Users/tbarnes/Documents/mdi/MDI\_Library/MDI\_Library/mdi\_mpi.c@{/Users/tbarnes/Documents/mdi/MDI\_Library/MDI\_Library/mdi\_mpi.c}}


M\+PI communication implementation.  


{\ttfamily \#include $<$mpi.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$signal.\+h$>$}\newline
{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include \char`\"{}mdi.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mdi\+\_\+mpi.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mdi\+\_\+global.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{mdi__mpi_8c_a027fc7cf6eb7e67c2b54a6091ee4ebd5}{set\+\_\+world\+\_\+size}} (int world\+\_\+size\+\_\+in)
\begin{DoxyCompactList}\small\item\em Set the size of M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{mdi__mpi_8c_a0639f31fe7860f028614354b78b22205}{set\+\_\+world\+\_\+rank}} (int world\+\_\+rank\+\_\+in)
\begin{DoxyCompactList}\small\item\em Set the rank of this process in M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{mdi__mpi_8c_a3701d036ed2e7bf59b85553c4596305d}{mpi\+\_\+identify\+\_\+codes}} (const char $\ast$code\+\_\+name, int do\+\_\+split, M\+P\+I\+\_\+\+Comm world\+\_\+comm)
\begin{DoxyCompactList}\small\item\em Identify groups of processes belonging to the same codes. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{mdi__mpi_8c_ae66fead66748e44e6c85283f44b98a15}{mpi\+\_\+update\+\_\+world\+\_\+comm}} (void $\ast$world\+\_\+comm)
\begin{DoxyCompactList}\small\item\em Update a pointer to M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD to instead point to the intra-\/code M\+PI communicator. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{mdi__mpi_8c_a6d66b1817b94f69720226726dd96f652}{mpi\+\_\+send}} (const void $\ast$buf, int count, M\+D\+I\+\_\+\+Datatype datatype, M\+D\+I\+\_\+\+Comm comm)
\begin{DoxyCompactList}\small\item\em Send data through an M\+DI connection, using M\+PI. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{mdi__mpi_8c_a314d5aa4402c37f22231a4ba96897de6}{mpi\+\_\+recv}} (void $\ast$buf, int count, M\+D\+I\+\_\+\+Datatype datatype, M\+D\+I\+\_\+\+Comm comm)
\begin{DoxyCompactList}\small\item\em Receive data through an M\+DI connection, using M\+PI. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{mdi__mpi_8c_a94117669fa21b6293d144b9f2ec9bc77}\label{mdi__mpi_8c_a94117669fa21b6293d144b9f2ec9bc77}} 
M\+P\+I\+\_\+\+Comm \mbox{\hyperlink{mdi__mpi_8c_a94117669fa21b6293d144b9f2ec9bc77}{intra\+\_\+\+M\+P\+I\+\_\+comm}} = 0
\begin{DoxyCompactList}\small\item\em M\+PI communicator corresponding to all processes created by the same code as this process. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{mdi__mpi_8c_ac7c9ae008d0383e5a99af93c0c0a741c}\label{mdi__mpi_8c_ac7c9ae008d0383e5a99af93c0c0a741c}} 
int \mbox{\hyperlink{mdi__mpi_8c_ac7c9ae008d0383e5a99af93c0c0a741c}{intra\+\_\+rank}} = 0
\begin{DoxyCompactList}\small\item\em Rank of this process within its associated code. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{mdi__mpi_8c_a6da60e1bcb42aadfd89405b192a82cf4}\label{mdi__mpi_8c_a6da60e1bcb42aadfd89405b192a82cf4}} 
int \mbox{\hyperlink{mdi__mpi_8c_a6da60e1bcb42aadfd89405b192a82cf4}{mpi\+\_\+code\+\_\+rank}} = 0
\begin{DoxyCompactList}\small\item\em Order of this code within all codes represented by M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{mdi__mpi_8c_ab8411355a7d80016be6edcce3437b978}\label{mdi__mpi_8c_ab8411355a7d80016be6edcce3437b978}} 
int \mbox{\hyperlink{mdi__mpi_8c_ab8411355a7d80016be6edcce3437b978}{world\+\_\+size}} = -\/1
\begin{DoxyCompactList}\small\item\em Size of M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{mdi__mpi_8c_a0be0ed3102aab1d72782301d75cf570b}\label{mdi__mpi_8c_a0be0ed3102aab1d72782301d75cf570b}} 
int \mbox{\hyperlink{mdi__mpi_8c_a0be0ed3102aab1d72782301d75cf570b}{world\+\_\+rank}} = -\/1
\begin{DoxyCompactList}\small\item\em Rank of this process within M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
M\+PI communication implementation. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{mdi__mpi_8c_a3701d036ed2e7bf59b85553c4596305d}\label{mdi__mpi_8c_a3701d036ed2e7bf59b85553c4596305d}} 
\index{mdi\_mpi.c@{mdi\_mpi.c}!mpi\_identify\_codes@{mpi\_identify\_codes}}
\index{mpi\_identify\_codes@{mpi\_identify\_codes}!mdi\_mpi.c@{mdi\_mpi.c}}
\doxysubsubsection{\texorpdfstring{mpi\_identify\_codes()}{mpi\_identify\_codes()}}
{\footnotesize\ttfamily int mpi\+\_\+identify\+\_\+codes (\begin{DoxyParamCaption}\item[{const char $\ast$}]{code\+\_\+name,  }\item[{int}]{do\+\_\+split,  }\item[{M\+P\+I\+\_\+\+Comm}]{world\+\_\+comm }\end{DoxyParamCaption})}



Identify groups of processes belonging to the same codes. 

If do\+\_\+split == 1, this function will call M\+P\+I\+\_\+\+Comm\+\_\+split to create an intra-\/code communicator for each code.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em code\+\_\+name} & M\+DI name of the code associated with this process, indicated by the user with the -\/name runtime option. \\
\hline
\mbox{\texttt{ in}}  & {\em do\+\_\+split} & Flag to indicate whether M\+P\+I\+\_\+\+Comm\+\_\+split should be called in order to create an intra-\/code communicator for each code. The intra-\/code communicators are created only if do\+\_\+split == 1. Should normally be set to 1, unless the code associated with this process is a Python code. In that case, the Python wrapper code will do the split instead. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{mdi__mpi_8c_a314d5aa4402c37f22231a4ba96897de6}\label{mdi__mpi_8c_a314d5aa4402c37f22231a4ba96897de6}} 
\index{mdi\_mpi.c@{mdi\_mpi.c}!mpi\_recv@{mpi\_recv}}
\index{mpi\_recv@{mpi\_recv}!mdi\_mpi.c@{mdi\_mpi.c}}
\doxysubsubsection{\texorpdfstring{mpi\_recv()}{mpi\_recv()}}
{\footnotesize\ttfamily int mpi\+\_\+recv (\begin{DoxyParamCaption}\item[{void $\ast$}]{buf,  }\item[{int}]{count,  }\item[{M\+D\+I\+\_\+\+Datatype}]{datatype,  }\item[{M\+D\+I\+\_\+\+Comm}]{comm }\end{DoxyParamCaption})}



Receive data through an M\+DI connection, using M\+PI. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em buf} & Pointer to the buffer where the received data will be stored. \\
\hline
\mbox{\texttt{ in}}  & {\em count} & Number of values (integers, double precision floats, characters, etc.) to be received. \\
\hline
\mbox{\texttt{ in}}  & {\em datatype} & M\+DI handle (M\+D\+I\+\_\+\+I\+NT, M\+D\+I\+\_\+\+D\+O\+U\+B\+LE, M\+D\+I\+\_\+\+C\+H\+AR, etc.) corresponding to the type of data to be received. \\
\hline
\mbox{\texttt{ in}}  & {\em comm} & M\+DI communicator associated with the connection to the sending code. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{mdi__mpi_8c_a6d66b1817b94f69720226726dd96f652}\label{mdi__mpi_8c_a6d66b1817b94f69720226726dd96f652}} 
\index{mdi\_mpi.c@{mdi\_mpi.c}!mpi\_send@{mpi\_send}}
\index{mpi\_send@{mpi\_send}!mdi\_mpi.c@{mdi\_mpi.c}}
\doxysubsubsection{\texorpdfstring{mpi\_send()}{mpi\_send()}}
{\footnotesize\ttfamily int mpi\+\_\+send (\begin{DoxyParamCaption}\item[{const void $\ast$}]{buf,  }\item[{int}]{count,  }\item[{M\+D\+I\+\_\+\+Datatype}]{datatype,  }\item[{M\+D\+I\+\_\+\+Comm}]{comm }\end{DoxyParamCaption})}



Send data through an M\+DI connection, using M\+PI. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em buf} & Pointer to the data to be sent. \\
\hline
\mbox{\texttt{ in}}  & {\em count} & Number of values (integers, double precision floats, characters, etc.) to be sent. \\
\hline
\mbox{\texttt{ in}}  & {\em datatype} & M\+DI handle (M\+D\+I\+\_\+\+I\+NT, M\+D\+I\+\_\+\+D\+O\+U\+B\+LE, M\+D\+I\+\_\+\+C\+H\+AR, etc.) corresponding to the type of data to be sent. \\
\hline
\mbox{\texttt{ in}}  & {\em comm} & M\+DI communicator associated with the intended recipient code. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{mdi__mpi_8c_ae66fead66748e44e6c85283f44b98a15}\label{mdi__mpi_8c_ae66fead66748e44e6c85283f44b98a15}} 
\index{mdi\_mpi.c@{mdi\_mpi.c}!mpi\_update\_world\_comm@{mpi\_update\_world\_comm}}
\index{mpi\_update\_world\_comm@{mpi\_update\_world\_comm}!mdi\_mpi.c@{mdi\_mpi.c}}
\doxysubsubsection{\texorpdfstring{mpi\_update\_world\_comm()}{mpi\_update\_world\_comm()}}
{\footnotesize\ttfamily int mpi\+\_\+update\+\_\+world\+\_\+comm (\begin{DoxyParamCaption}\item[{void $\ast$}]{world\+\_\+comm }\end{DoxyParamCaption})}



Update a pointer to M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD to instead point to the intra-\/code M\+PI communicator. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em world\+\_\+comm} & On input, the M\+PI communicator that spans all of the codes. On output, the M\+PI communicator that spans the single code corresponding to the calling rank. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{mdi__mpi_8c_a0639f31fe7860f028614354b78b22205}\label{mdi__mpi_8c_a0639f31fe7860f028614354b78b22205}} 
\index{mdi\_mpi.c@{mdi\_mpi.c}!set\_world\_rank@{set\_world\_rank}}
\index{set\_world\_rank@{set\_world\_rank}!mdi\_mpi.c@{mdi\_mpi.c}}
\doxysubsubsection{\texorpdfstring{set\_world\_rank()}{set\_world\_rank()}}
{\footnotesize\ttfamily int set\+\_\+world\+\_\+rank (\begin{DoxyParamCaption}\item[{int}]{world\+\_\+rank\+\_\+in }\end{DoxyParamCaption})}



Set the rank of this process in M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em world\+\_\+rank\+\_\+in} & Rank of this process within M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{mdi__mpi_8c_a027fc7cf6eb7e67c2b54a6091ee4ebd5}\label{mdi__mpi_8c_a027fc7cf6eb7e67c2b54a6091ee4ebd5}} 
\index{mdi\_mpi.c@{mdi\_mpi.c}!set\_world\_size@{set\_world\_size}}
\index{set\_world\_size@{set\_world\_size}!mdi\_mpi.c@{mdi\_mpi.c}}
\doxysubsubsection{\texorpdfstring{set\_world\_size()}{set\_world\_size()}}
{\footnotesize\ttfamily int set\+\_\+world\+\_\+size (\begin{DoxyParamCaption}\item[{int}]{world\+\_\+size\+\_\+in }\end{DoxyParamCaption})}



Set the size of M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em world\+\_\+size\+\_\+in} & Size of M\+P\+I\+\_\+\+C\+O\+M\+M\+\_\+\+W\+O\+R\+LD \\
\hline
\end{DoxyParams}
